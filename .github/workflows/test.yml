name: Test

on:
  push:
    branches: [ develop ]
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repo
      uses: actions/checkout@v3
    - name: Install pyMAISE
      uses: awalsh128/cache-apt-pkgs-action@latest
      with:
        packages: build-essential python3
    - name: Install libraries
      run: |
        python3 -m pip install --upgrade pip
        pip install setuptools
        pip install pytest
        pip install -e .
    - name: Run tests
      run: |
        cd tests
        pytest .
